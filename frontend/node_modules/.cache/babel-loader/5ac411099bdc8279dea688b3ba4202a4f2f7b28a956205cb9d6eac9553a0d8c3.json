{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2189910\\\\Project Nodejs Updated\\\\waste-management-app\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.jsx\";\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Spinner, Container, Row, Col } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  auth,\n  requiredRole = null\n}) => {\n  var _auth$user;\n  // Show loading spinner while checking authentication\n  if (auth.loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center align-items-center\",\n      style: {\n        minHeight: '50vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          variant: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 12,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-muted\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 13,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!auth.isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role-based access\n  if (requiredRole && ((_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.role) !== requiredRole) {\n    var _auth$user2;\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-warning\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Access Denied\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 31,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"You don't have permission to access this page.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 32,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Required role: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: requiredRole\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 33,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Your role: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: (_auth$user2 = auth.user) === null || _auth$user2 === void 0 ? void 0 : _auth$user2.role\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 34,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 34,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_c = ProtectedRoute;\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\nexport default connect(mapStateToProps)(ProtectedRoute);\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","connect","Spinner","Container","Row","Col","jsxDEV","_jsxDEV","ProtectedRoute","children","auth","requiredRole","_auth$user","loading","className","style","minHeight","animation","variant","fileName","_jsxFileName","lineNumber","columnNumber","isAuthenticated","to","replace","user","role","_auth$user2","md","_c","mapStateToProps","state","$RefreshReg$"],"sources":["C:/Users/2189910/Project Nodejs Updated/waste-management-app/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Spinner, Container, Row, Col } from 'react-bootstrap';\r\n\r\nconst ProtectedRoute = ({ children, auth, requiredRole = null }) => {\r\n  // Show loading spinner while checking authentication\r\n  if (auth.loading) {\r\n    return (\r\n      <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '50vh' }}>\r\n        <div className=\"text-center\">\r\n          <Spinner animation=\"border\" variant=\"primary\" />\r\n          <p className=\"mt-2 text-muted\">Loading...</p>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!auth.isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (requiredRole && auth.user?.role !== requiredRole) {\r\n    return (\r\n      <Container className=\"py-5\">\r\n        <Row className=\"justify-content-center\">\r\n          <Col md={6} className=\"text-center\">\r\n            <div className=\"alert alert-warning\">\r\n              <h4>Access Denied</h4>\r\n              <p>You don't have permission to access this page.</p>\r\n              <p>Required role: <strong>{requiredRole}</strong></p>\r\n              <p>Your role: <strong>{auth.user?.role}</strong></p>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps)(ProtectedRoute);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}