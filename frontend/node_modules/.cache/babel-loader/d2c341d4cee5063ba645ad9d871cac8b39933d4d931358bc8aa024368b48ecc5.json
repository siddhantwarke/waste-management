{"ast":null,"code":"import React,{useState}from'react';import{connect}from'react-redux';import{Link,useNavigate}from'react-router-dom';import{Container,Row,Col,Card,Form,Button,Alert,Spinner}from'react-bootstrap';import{Formik}from'formik';import*as Yup from'yup';import{login,clearAuthError}from'../redux/actions/authActions';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=_ref=>{let{auth,login,clearAuthError}=_ref;const navigate=useNavigate();const[showPassword,setShowPassword]=useState(false);const validationSchema=Yup.object({email:Yup.string().email('Invalid email address').required('Email is required'),password:Yup.string().required('Password is required')});const handleSubmit=async(values,_ref2)=>{let{setSubmitting}=_ref2;try{const result=await login(values.email,values.password);if(result.success){toast.success(result.message);navigate('/dashboard');}else{toast.error(result.message);}}catch(error){toast.error('An unexpected error occurred');}finally{setSubmitting(false);}};React.useEffect(()=>{if(auth.isAuthenticated){navigate('/dashboard');}// Clear any existing errors when component mounts\nif(auth.error){clearAuthError();}},[auth.isAuthenticated,navigate,auth.error,clearAuthError]);return/*#__PURE__*/_jsx(Container,{className:\"py-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,lg:5,children:/*#__PURE__*/_jsx(Card,{className:\"shadow\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"fw-bold text-primary\",children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Sign in to your account\"})]}),auth.error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"mb-3\",children:auth.error}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:''},validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref3=>{let{values,errors,touched,handleChange,handleBlur,handleSubmit,isSubmitting}=_ref3;return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",value:values.email,onChange:handleChange,onBlur:handleBlur,isInvalid:touched.email&&errors.email,placeholder:\"Enter your email\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:errors.email})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Form.Control,{type:showPassword?'text':'password',name:\"password\",value:values.password,onChange:handleChange,onBlur:handleBlur,isInvalid:touched.password&&errors.password,placeholder:\"Enter your password\"}),/*#__PURE__*/_jsx(Button,{variant:\"link\",className:\"position-absolute top-50 end-0 translate-middle-y border-0 text-muted\",style:{background:'none',fontSize:'0.875rem'},onClick:()=>setShowPassword(!showPassword),type:\"button\",children:showPassword?'Hide':'Show'})]}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:errors.password})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100 mb-3\",disabled:isSubmitting||auth.loading,children:isSubmitting||auth.loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\",className:\"me-2\"}),\"Signing In...\"]}):'Sign In'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-primary fw-bold\",children:\"Sign Up\"})]})})]});}})]})})})})});};const mapStateToProps=state=>({auth:state.auth});const mapDispatchToProps={login,clearAuthError};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"names":["React","useState","connect","Link","useNavigate","Container","Row","Col","Card","Form","Button","Alert","Spinner","Formik","Yup","login","clearAuthError","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","auth","navigate","showPassword","setShowPassword","validationSchema","object","email","string","required","password","handleSubmit","values","_ref2","setSubmitting","result","success","message","error","useEffect","isAuthenticated","className","children","md","lg","Body","variant","initialValues","onSubmit","_ref3","errors","touched","handleChange","handleBlur","isSubmitting","Group","Label","Control","type","name","value","onChange","onBlur","isInvalid","placeholder","Feedback","style","background","fontSize","onClick","disabled","loading","as","animation","size","role","to","mapStateToProps","state","mapDispatchToProps"],"sources":["C:/Users/2189910/Project Nodejs Updated/frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Container, Row, Col, Card, Form, Button, Alert, Spinner } from 'react-bootstrap';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { login, clearAuthError } from '../redux/actions/authActions';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Login = ({ auth, login, clearAuthError }) => {\r\n  const navigate = useNavigate();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const validationSchema = Yup.object({\r\n    email: Yup.string()\r\n      .email('Invalid email address')\r\n      .required('Email is required'),\r\n    password: Yup.string()\r\n      .required('Password is required')\r\n  });\r\n\r\n  const handleSubmit = async (values, { setSubmitting }) => {\r\n    try {\r\n      const result = await login(values.email, values.password);\r\n      \r\n      if (result.success) {\r\n        toast.success(result.message);\r\n        navigate('/dashboard');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('An unexpected error occurred');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (auth.isAuthenticated) {\r\n      navigate('/dashboard');\r\n    }\r\n    \r\n    // Clear any existing errors when component mounts\r\n    if (auth.error) {\r\n      clearAuthError();\r\n    }\r\n  }, [auth.isAuthenticated, navigate, auth.error, clearAuthError]);\r\n\r\n  return (\r\n    <Container className=\"py-5\">\r\n      <Row className=\"justify-content-center\">\r\n        <Col md={6} lg={5}>\r\n          <Card className=\"shadow\">\r\n            <Card.Body className=\"p-4\">\r\n              <div className=\"text-center mb-4\">\r\n                <h2 className=\"fw-bold text-primary\">Welcome Back</h2>\r\n                <p className=\"text-muted\">Sign in to your account</p>\r\n              </div>\r\n\r\n              {auth.error && (\r\n                <Alert variant=\"danger\" className=\"mb-3\">\r\n                  {auth.error}\r\n                </Alert>\r\n              )}\r\n\r\n              <Formik\r\n                initialValues={{ email: '', password: '' }}\r\n                validationSchema={validationSchema}\r\n                onSubmit={handleSubmit}\r\n              >\r\n                {({\r\n                  values,\r\n                  errors,\r\n                  touched,\r\n                  handleChange,\r\n                  handleBlur,\r\n                  handleSubmit,\r\n                  isSubmitting\r\n                }) => (\r\n                  <Form onSubmit={handleSubmit}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label>Email Address</Form.Label>\r\n                      <Form.Control\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        value={values.email}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        isInvalid={touched.email && errors.email}\r\n                        placeholder=\"Enter your email\"\r\n                      />\r\n                      <Form.Control.Feedback type=\"invalid\">\r\n                        {errors.email}\r\n                      </Form.Control.Feedback>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label>Password</Form.Label>\r\n                      <div className=\"position-relative\">\r\n                        <Form.Control\r\n                          type={showPassword ? 'text' : 'password'}\r\n                          name=\"password\"\r\n                          value={values.password}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          isInvalid={touched.password && errors.password}\r\n                          placeholder=\"Enter your password\"\r\n                        />\r\n                        <Button\r\n                          variant=\"link\"\r\n                          className=\"position-absolute top-50 end-0 translate-middle-y border-0 text-muted\"\r\n                          style={{ background: 'none', fontSize: '0.875rem' }}\r\n                          onClick={() => setShowPassword(!showPassword)}\r\n                          type=\"button\"\r\n                        >\r\n                          {showPassword ? 'Hide' : 'Show'}\r\n                        </Button>\r\n                      </div>\r\n                      <Form.Control.Feedback type=\"invalid\">\r\n                        {errors.password}\r\n                      </Form.Control.Feedback>\r\n                    </Form.Group>\r\n\r\n                    <Button\r\n                      variant=\"primary\"\r\n                      type=\"submit\"\r\n                      className=\"w-100 mb-3\"\r\n                      disabled={isSubmitting || auth.loading}\r\n                    >\r\n                      {(isSubmitting || auth.loading) ? (\r\n                        <>\r\n                          <Spinner\r\n                            as=\"span\"\r\n                            animation=\"border\"\r\n                            size=\"sm\"\r\n                            role=\"status\"\r\n                            aria-hidden=\"true\"\r\n                            className=\"me-2\"\r\n                          />\r\n                          Signing In...\r\n                        </>\r\n                      ) : (\r\n                        'Sign In'\r\n                      )}\r\n                    </Button>\r\n\r\n                    <div className=\"text-center\">\r\n                      <p className=\"mb-0\">\r\n                        Don't have an account?{' '}\r\n                        <Link to=\"/register\" className=\"text-primary fw-bold\">\r\n                          Sign Up\r\n                        </Link>\r\n                      </p>\r\n                    </div>\r\n                  </Form>\r\n                )}\r\n              </Formik>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  login,\r\n  clearAuthError\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,SAAS,CAAEC,GAAG,CAAEC,GAAG,CAAEC,IAAI,CAAEC,IAAI,CAAEC,MAAM,CAAEC,KAAK,CAAEC,OAAO,KAAQ,iBAAiB,CACzF,OAASC,MAAM,KAAQ,QAAQ,CAC/B,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,KAAK,CAAEC,cAAc,KAAQ,8BAA8B,CACpE,OAASC,KAAK,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvC,KAAM,CAAAC,KAAK,CAAGC,IAAA,EAAqC,IAApC,CAAEC,IAAI,CAAEX,KAAK,CAAEC,cAAe,CAAC,CAAAS,IAAA,CAC5C,KAAM,CAAAE,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACwB,YAAY,CAAEC,eAAe,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CAEvD,KAAM,CAAA6B,gBAAgB,CAAGhB,GAAG,CAACiB,MAAM,CAAC,CAClCC,KAAK,CAAElB,GAAG,CAACmB,MAAM,CAAC,CAAC,CAChBD,KAAK,CAAC,uBAAuB,CAAC,CAC9BE,QAAQ,CAAC,mBAAmB,CAAC,CAChCC,QAAQ,CAAErB,GAAG,CAACmB,MAAM,CAAC,CAAC,CACnBC,QAAQ,CAAC,sBAAsB,CACpC,CAAC,CAAC,CAEF,KAAM,CAAAE,YAAY,CAAG,KAAAA,CAAOC,MAAM,CAAAC,KAAA,GAAwB,IAAtB,CAAEC,aAAc,CAAC,CAAAD,KAAA,CACnD,GAAI,CACF,KAAM,CAAAE,MAAM,CAAG,KAAM,CAAAzB,KAAK,CAACsB,MAAM,CAACL,KAAK,CAAEK,MAAM,CAACF,QAAQ,CAAC,CAEzD,GAAIK,MAAM,CAACC,OAAO,CAAE,CAClBxB,KAAK,CAACwB,OAAO,CAACD,MAAM,CAACE,OAAO,CAAC,CAC7Bf,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAC,IAAM,CACLV,KAAK,CAAC0B,KAAK,CAACH,MAAM,CAACE,OAAO,CAAC,CAC7B,CACF,CAAE,MAAOC,KAAK,CAAE,CACd1B,KAAK,CAAC0B,KAAK,CAAC,8BAA8B,CAAC,CAC7C,CAAC,OAAS,CACRJ,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAEDvC,KAAK,CAAC4C,SAAS,CAAC,IAAM,CACpB,GAAIlB,IAAI,CAACmB,eAAe,CAAE,CACxBlB,QAAQ,CAAC,YAAY,CAAC,CACxB,CAEA;AACA,GAAID,IAAI,CAACiB,KAAK,CAAE,CACd3B,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAAE,CAACU,IAAI,CAACmB,eAAe,CAAElB,QAAQ,CAAED,IAAI,CAACiB,KAAK,CAAE3B,cAAc,CAAC,CAAC,CAEhE,mBACEG,IAAA,CAACd,SAAS,EAACyC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACzB5B,IAAA,CAACb,GAAG,EAACwC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrC5B,IAAA,CAACZ,GAAG,EAACyC,EAAE,CAAE,CAAE,CAACC,EAAE,CAAE,CAAE,CAAAF,QAAA,cAChB5B,IAAA,CAACX,IAAI,EAACsC,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACtB1B,KAAA,CAACb,IAAI,CAAC0C,IAAI,EAACJ,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxB1B,KAAA,QAAKyB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B5B,IAAA,OAAI2B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACtD5B,IAAA,MAAG2B,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,yBAAuB,CAAG,CAAC,EAClD,CAAC,CAELrB,IAAI,CAACiB,KAAK,eACTxB,IAAA,CAACR,KAAK,EAACwC,OAAO,CAAC,QAAQ,CAACL,SAAS,CAAC,MAAM,CAAAC,QAAA,CACrCrB,IAAI,CAACiB,KAAK,CACN,CACR,cAEDxB,IAAA,CAACN,MAAM,EACLuC,aAAa,CAAE,CAAEpB,KAAK,CAAE,EAAE,CAAEG,QAAQ,CAAE,EAAG,CAAE,CAC3CL,gBAAgB,CAAEA,gBAAiB,CACnCuB,QAAQ,CAAEjB,YAAa,CAAAW,QAAA,CAEtBO,KAAA,MAAC,CACAjB,MAAM,CACNkB,MAAM,CACNC,OAAO,CACPC,YAAY,CACZC,UAAU,CACVtB,YAAY,CACZuB,YACF,CAAC,CAAAL,KAAA,oBACCjC,KAAA,CAACZ,IAAI,EAAC4C,QAAQ,CAAEjB,YAAa,CAAAW,QAAA,eAC3B1B,KAAA,CAACZ,IAAI,CAACmD,KAAK,EAACd,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC1B5B,IAAA,CAACV,IAAI,CAACoD,KAAK,EAAAd,QAAA,CAAC,eAAa,CAAY,CAAC,cACtC5B,IAAA,CAACV,IAAI,CAACqD,OAAO,EACXC,IAAI,CAAC,OAAO,CACZC,IAAI,CAAC,OAAO,CACZC,KAAK,CAAE5B,MAAM,CAACL,KAAM,CACpBkC,QAAQ,CAAET,YAAa,CACvBU,MAAM,CAAET,UAAW,CACnBU,SAAS,CAAEZ,OAAO,CAACxB,KAAK,EAAIuB,MAAM,CAACvB,KAAM,CACzCqC,WAAW,CAAC,kBAAkB,CAC/B,CAAC,cACFlD,IAAA,CAACV,IAAI,CAACqD,OAAO,CAACQ,QAAQ,EAACP,IAAI,CAAC,SAAS,CAAAhB,QAAA,CAClCQ,MAAM,CAACvB,KAAK,CACQ,CAAC,EACd,CAAC,cAEbX,KAAA,CAACZ,IAAI,CAACmD,KAAK,EAACd,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC1B5B,IAAA,CAACV,IAAI,CAACoD,KAAK,EAAAd,QAAA,CAAC,UAAQ,CAAY,CAAC,cACjC1B,KAAA,QAAKyB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC5B,IAAA,CAACV,IAAI,CAACqD,OAAO,EACXC,IAAI,CAAEnC,YAAY,CAAG,MAAM,CAAG,UAAW,CACzCoC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAE5B,MAAM,CAACF,QAAS,CACvB+B,QAAQ,CAAET,YAAa,CACvBU,MAAM,CAAET,UAAW,CACnBU,SAAS,CAAEZ,OAAO,CAACrB,QAAQ,EAAIoB,MAAM,CAACpB,QAAS,CAC/CkC,WAAW,CAAC,qBAAqB,CAClC,CAAC,cACFlD,IAAA,CAACT,MAAM,EACLyC,OAAO,CAAC,MAAM,CACdL,SAAS,CAAC,uEAAuE,CACjFyB,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAM,CAAEC,QAAQ,CAAE,UAAW,CAAE,CACpDC,OAAO,CAAEA,CAAA,GAAM7C,eAAe,CAAC,CAACD,YAAY,CAAE,CAC9CmC,IAAI,CAAC,QAAQ,CAAAhB,QAAA,CAEZnB,YAAY,CAAG,MAAM,CAAG,MAAM,CACzB,CAAC,EACN,CAAC,cACNT,IAAA,CAACV,IAAI,CAACqD,OAAO,CAACQ,QAAQ,EAACP,IAAI,CAAC,SAAS,CAAAhB,QAAA,CAClCQ,MAAM,CAACpB,QAAQ,CACK,CAAC,EACd,CAAC,cAEbhB,IAAA,CAACT,MAAM,EACLyC,OAAO,CAAC,SAAS,CACjBY,IAAI,CAAC,QAAQ,CACbjB,SAAS,CAAC,YAAY,CACtB6B,QAAQ,CAAEhB,YAAY,EAAIjC,IAAI,CAACkD,OAAQ,CAAA7B,QAAA,CAErCY,YAAY,EAAIjC,IAAI,CAACkD,OAAO,cAC5BvD,KAAA,CAAAE,SAAA,EAAAwB,QAAA,eACE5B,IAAA,CAACP,OAAO,EACNiE,EAAE,CAAC,MAAM,CACTC,SAAS,CAAC,QAAQ,CAClBC,IAAI,CAAC,IAAI,CACTC,IAAI,CAAC,QAAQ,CACb,cAAY,MAAM,CAClBlC,SAAS,CAAC,MAAM,CACjB,CAAC,gBAEJ,EAAE,CAAC,CAEH,SACD,CACK,CAAC,cAET3B,IAAA,QAAK2B,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1B1B,KAAA,MAAGyB,SAAS,CAAC,MAAM,CAAAC,QAAA,EAAC,wBACI,CAAC,GAAG,cAC1B5B,IAAA,CAAChB,IAAI,EAAC8E,EAAE,CAAC,WAAW,CAACnC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,SAEtD,CAAM,CAAC,EACN,CAAC,CACD,CAAC,EACF,CAAC,EACR,CACK,CAAC,EACA,CAAC,CACR,CAAC,CACJ,CAAC,CACH,CAAC,CACG,CAAC,CAEhB,CAAC,CAED,KAAM,CAAAmC,eAAe,CAAIC,KAAK,GAAM,CAClCzD,IAAI,CAAEyD,KAAK,CAACzD,IACd,CAAC,CAAC,CAEF,KAAM,CAAA0D,kBAAkB,CAAG,CACzBrE,KAAK,CACLC,cACF,CAAC,CAED,cAAe,CAAAd,OAAO,CAACgF,eAAe,CAAEE,kBAAkB,CAAC,CAAC5D,KAAK,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}