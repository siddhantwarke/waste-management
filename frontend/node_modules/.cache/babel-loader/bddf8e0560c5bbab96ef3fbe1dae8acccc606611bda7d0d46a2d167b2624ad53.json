{"ast":null,"code":"import axios from'axios';import{AUTH_LOADING,AUTH_SUCCESS,AUTH_FAILURE,LOGOUT,CLEAR_AUTH_ERROR,SET_USER}from'./types';// API Base URL\nconst API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Set token in axios headers\nconst setAuthToken=token=>{if(token){axios.defaults.headers.common['Authorization']=`Bearer ${token}`;localStorage.setItem('token',token);}else{delete axios.defaults.headers.common['Authorization'];localStorage.removeItem('token');}};// Load user from token\nexport const loadUser=()=>async dispatch=>{const token=localStorage.getItem('token');if(token){setAuthToken(token);try{dispatch({type:AUTH_LOADING});const res=await axios.get(`${API_URL}/auth/verify`);dispatch({type:AUTH_SUCCESS,payload:{token,user:res.data.user}});}catch(error){var _error$response,_error$response$data;console.error('Load user error:',error);dispatch({type:AUTH_FAILURE,payload:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to load user'});setAuthToken(null);}}};// Register user\nexport const register=userData=>async dispatch=>{try{dispatch({type:AUTH_LOADING});const config={headers:{'Content-Type':'application/json'}};const res=await axios.post(`${API_URL}/auth/register`,userData,config);const{token,user}=res.data;setAuthToken(token);dispatch({type:AUTH_SUCCESS,payload:{token,user}});return{success:true,message:res.data.message};}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Registration error:',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Registration failed';const errors=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.errors)||[];dispatch({type:AUTH_FAILURE,payload:errorMessage});return{success:false,message:errorMessage,errors};}};// Login user\nexport const login=(email,password)=>async dispatch=>{try{dispatch({type:AUTH_LOADING});const config={headers:{'Content-Type':'application/json'}};const res=await axios.post(`${API_URL}/auth/login`,{email,password},config);const{token,user}=res.data;setAuthToken(token);dispatch({type:AUTH_SUCCESS,payload:{token,user}});return{success:true,message:res.data.message};}catch(error){var _error$response4,_error$response4$data;console.error('Login error:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Login failed';dispatch({type:AUTH_FAILURE,payload:errorMessage});return{success:false,message:errorMessage};}};// Logout user\nexport const logout=()=>dispatch=>{setAuthToken(null);dispatch({type:LOGOUT});};// Clear auth error\nexport const clearAuthError=()=>dispatch=>{dispatch({type:CLEAR_AUTH_ERROR});};// Get user profile\nexport const getUserProfile=()=>async dispatch=>{try{const res=await axios.get(`${API_URL}/auth/profile`);dispatch({type:SET_USER,payload:res.data.user});return{success:true,user:res.data.user};}catch(error){var _error$response5,_error$response5$data;console.error('Get profile error:',error);return{success:false,message:((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to get profile'};}};","map":{"version":3,"names":["axios","AUTH_LOADING","AUTH_SUCCESS","AUTH_FAILURE","LOGOUT","CLEAR_AUTH_ERROR","SET_USER","API_URL","process","env","REACT_APP_API_URL","setAuthToken","token","defaults","headers","common","localStorage","setItem","removeItem","loadUser","dispatch","getItem","type","res","get","payload","user","data","error","_error$response","_error$response$data","console","response","message","register","userData","config","post","success","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errorMessage","errors","login","email","password","_error$response4","_error$response4$data","logout","clearAuthError","getUserProfile","_error$response5","_error$response5$data"],"sources":["C:/Users/2189910/Project Nodejs Updated/frontend/src/redux/actions/authActions.js"],"sourcesContent":["import axios from 'axios';\r\nimport {\r\n  AUTH_LOADING,\r\n  AUTH_SUCCESS,\r\n  AUTH_FAILURE,\r\n  LOGOUT,\r\n  CLEAR_AUTH_ERROR,\r\n  SET_USER\r\n} from './types';\r\n\r\n// API Base URL\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Set token in axios headers\r\nconst setAuthToken = (token) => {\r\n  if (token) {\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n    localStorage.setItem('token', token);\r\n  } else {\r\n    delete axios.defaults.headers.common['Authorization'];\r\n    localStorage.removeItem('token');\r\n  }\r\n};\r\n\r\n// Load user from token\r\nexport const loadUser = () => async (dispatch) => {\r\n  const token = localStorage.getItem('token');\r\n  \r\n  if (token) {\r\n    setAuthToken(token);\r\n    \r\n    try {\r\n      dispatch({ type: AUTH_LOADING });\r\n      \r\n      const res = await axios.get(`${API_URL}/auth/verify`);\r\n      \r\n      dispatch({\r\n        type: AUTH_SUCCESS,\r\n        payload: {\r\n          token,\r\n          user: res.data.user\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Load user error:', error);\r\n      dispatch({\r\n        type: AUTH_FAILURE,\r\n        payload: error.response?.data?.message || 'Failed to load user'\r\n      });\r\n      setAuthToken(null);\r\n    }\r\n  }\r\n};\r\n\r\n// Register user\r\nexport const register = (userData) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: AUTH_LOADING });\r\n    \r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n    \r\n    const res = await axios.post(`${API_URL}/auth/register`, userData, config);\r\n    \r\n    const { token, user } = res.data;\r\n    \r\n    setAuthToken(token);\r\n    \r\n    dispatch({\r\n      type: AUTH_SUCCESS,\r\n      payload: {\r\n        token,\r\n        user\r\n      }\r\n    });\r\n    \r\n    return { success: true, message: res.data.message };\r\n  } catch (error) {\r\n    console.error('Registration error:', error);\r\n    const errorMessage = error.response?.data?.message || 'Registration failed';\r\n    const errors = error.response?.data?.errors || [];\r\n    \r\n    dispatch({\r\n      type: AUTH_FAILURE,\r\n      payload: errorMessage\r\n    });\r\n    \r\n    return { \r\n      success: false, \r\n      message: errorMessage, \r\n      errors \r\n    };\r\n  }\r\n};\r\n\r\n// Login user\r\nexport const login = (email, password) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: AUTH_LOADING });\r\n    \r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n    \r\n    const res = await axios.post(`${API_URL}/auth/login`, { email, password }, config);\r\n    \r\n    const { token, user } = res.data;\r\n    \r\n    setAuthToken(token);\r\n    \r\n    dispatch({\r\n      type: AUTH_SUCCESS,\r\n      payload: {\r\n        token,\r\n        user\r\n      }\r\n    });\r\n    \r\n    return { success: true, message: res.data.message };\r\n  } catch (error) {\r\n    console.error('Login error:', error);\r\n    const errorMessage = error.response?.data?.message || 'Login failed';\r\n    \r\n    dispatch({\r\n      type: AUTH_FAILURE,\r\n      payload: errorMessage\r\n    });\r\n    \r\n    return { \r\n      success: false, \r\n      message: errorMessage \r\n    };\r\n  }\r\n};\r\n\r\n// Logout user\r\nexport const logout = () => (dispatch) => {\r\n  setAuthToken(null);\r\n  dispatch({ type: LOGOUT });\r\n};\r\n\r\n// Clear auth error\r\nexport const clearAuthError = () => (dispatch) => {\r\n  dispatch({ type: CLEAR_AUTH_ERROR });\r\n};\r\n\r\n// Get user profile\r\nexport const getUserProfile = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`${API_URL}/auth/profile`);\r\n    \r\n    dispatch({\r\n      type: SET_USER,\r\n      payload: res.data.user\r\n    });\r\n    \r\n    return { success: true, user: res.data.user };\r\n  } catch (error) {\r\n    console.error('Get profile error:', error);\r\n    return { \r\n      success: false, \r\n      message: error.response?.data?.message || 'Failed to get profile' \r\n    };\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}