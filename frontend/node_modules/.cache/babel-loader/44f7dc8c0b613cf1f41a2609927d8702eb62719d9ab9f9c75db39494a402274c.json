{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{connect}from'react-redux';import{Spinner,Container,Row,Col}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{var _auth$user;let{children,auth,requiredRole=null}=_ref;// Show loading spinner while checking authentication\nif(auth.loading){return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{minHeight:'50vh'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-muted\",children:\"Loading...\"})]})});}// Redirect to login if not authenticated\nif(!auth.isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check role-based access\nif(requiredRole&&((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)!==requiredRole){var _auth$user2;return/*#__PURE__*/_jsx(Container,{className:\"py-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,className:\"text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You don't have permission to access this page.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Required role: \",/*#__PURE__*/_jsx(\"strong\",{children:requiredRole})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Your role: \",/*#__PURE__*/_jsx(\"strong\",{children:(_auth$user2=auth.user)===null||_auth$user2===void 0?void 0:_auth$user2.role})]})]})})})});}return children;};const mapStateToProps=state=>({auth:state.auth});export default connect(mapStateToProps)(ProtectedRoute);","map":{"version":3,"names":["React","Navigate","connect","Spinner","Container","Row","Col","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","_auth$user","children","auth","requiredRole","loading","className","style","minHeight","animation","variant","isAuthenticated","to","replace","user","role","_auth$user2","md","mapStateToProps","state"],"sources":["C:/Users/2189910/Project Nodejs Updated/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Spinner, Container, Row, Col } from 'react-bootstrap';\r\n\r\nconst ProtectedRoute = ({ children, auth, requiredRole = null }) => {\r\n  // Show loading spinner while checking authentication\r\n  if (auth.loading) {\r\n    return (\r\n      <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '50vh' }}>\r\n        <div className=\"text-center\">\r\n          <Spinner animation=\"border\" variant=\"primary\" />\r\n          <p className=\"mt-2 text-muted\">Loading...</p>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!auth.isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (requiredRole && auth.user?.role !== requiredRole) {\r\n    return (\r\n      <Container className=\"py-5\">\r\n        <Row className=\"justify-content-center\">\r\n          <Col md={6} className=\"text-center\">\r\n            <div className=\"alert alert-warning\">\r\n              <h4>Access Denied</h4>\r\n              <p>You don't have permission to access this page.</p>\r\n              <p>Required role: <strong>{requiredRole}</strong></p>\r\n              <p>Your role: <strong>{auth.user?.role}</strong></p>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps)(ProtectedRoute);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,OAAO,CAAEC,SAAS,CAAEC,GAAG,CAAEC,GAAG,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/D,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA6C,KAAAC,UAAA,IAA5C,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,YAAY,CAAG,IAAK,CAAC,CAAAJ,IAAA,CAC7D;AACA,GAAIG,IAAI,CAACE,OAAO,CAAE,CAChB,mBACET,IAAA,CAACJ,SAAS,EAACc,SAAS,CAAC,kDAAkD,CAACC,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAN,QAAA,cACnGJ,KAAA,QAAKQ,SAAS,CAAC,aAAa,CAAAJ,QAAA,eAC1BN,IAAA,CAACL,OAAO,EAACkB,SAAS,CAAC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAE,CAAC,cAChDd,IAAA,MAAGU,SAAS,CAAC,iBAAiB,CAAAJ,QAAA,CAAC,YAAU,CAAG,CAAC,EAC1C,CAAC,CACG,CAAC,CAEhB,CAEA;AACA,GAAI,CAACC,IAAI,CAACQ,eAAe,CAAE,CACzB,mBAAOf,IAAA,CAACP,QAAQ,EAACuB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA;AACA,GAAIT,YAAY,EAAI,EAAAH,UAAA,CAAAE,IAAI,CAACW,IAAI,UAAAb,UAAA,iBAATA,UAAA,CAAWc,IAAI,IAAKX,YAAY,CAAE,KAAAY,WAAA,CACpD,mBACEpB,IAAA,CAACJ,SAAS,EAACc,SAAS,CAAC,MAAM,CAAAJ,QAAA,cACzBN,IAAA,CAACH,GAAG,EAACa,SAAS,CAAC,wBAAwB,CAAAJ,QAAA,cACrCN,IAAA,CAACF,GAAG,EAACuB,EAAE,CAAE,CAAE,CAACX,SAAS,CAAC,aAAa,CAAAJ,QAAA,cACjCJ,KAAA,QAAKQ,SAAS,CAAC,qBAAqB,CAAAJ,QAAA,eAClCN,IAAA,OAAAM,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBN,IAAA,MAAAM,QAAA,CAAG,gDAA8C,CAAG,CAAC,cACrDJ,KAAA,MAAAI,QAAA,EAAG,iBAAe,cAAAN,IAAA,WAAAM,QAAA,CAASE,YAAY,CAAS,CAAC,EAAG,CAAC,cACrDN,KAAA,MAAAI,QAAA,EAAG,aAAW,cAAAN,IAAA,WAAAM,QAAA,EAAAc,WAAA,CAASb,IAAI,CAACW,IAAI,UAAAE,WAAA,iBAATA,WAAA,CAAWD,IAAI,CAAS,CAAC,EAAG,CAAC,EACjD,CAAC,CACH,CAAC,CACH,CAAC,CACG,CAAC,CAEhB,CAEA,MAAO,CAAAb,QAAQ,CACjB,CAAC,CAED,KAAM,CAAAgB,eAAe,CAAIC,KAAK,GAAM,CAClChB,IAAI,CAAEgB,KAAK,CAAChB,IACd,CAAC,CAAC,CAEF,cAAe,CAAAb,OAAO,CAAC4B,eAAe,CAAC,CAACnB,cAAc,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}